---
title: "11ì›” 2ì£¼ì°¨: 11/08(í™”)"
---

# ğŸ“š ì˜¤ëŠ˜ í•œ ì¼
### 11/08(í™”)
* ë¹„ë™ê¸° ì‚­ì œ ë¦¬íŒ©í† ë§
   * ê° taskì—ì„œ select & update í•˜ë„ë¡ ìˆ˜ì •
   * ì—¬ëŸ¬ update query í•œ íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ ì²˜ë¦¬(`executemany`)

# ğŸ“Œ ë°°ìš´ ë‚´ìš© / ìŠì§€ ì•Šê¸° ìœ„í•œ ì§¤ë§‰ ë©”ëª¨
* `JSON_SET()`: JSON í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ insertí•˜ê±°ë‚˜ updateí•˜ëŠ” í•¨ìˆ˜
```
 JSON_ARRAY_APPEND(json_doc, path, val[, path, val] ...)
```
ex.
```mysql
UPDATE asset SET json_column=JSON_SET(json_column, '$.status', 'success', '$.targets[0].status', 'success') WHERE id = 1;
```
* `executemany` : ì—¬ëŸ¬ ì¿¼ë¦¬ë¥¼ í•œë²ˆì— ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” mysql DBMS API
   * í•´ë§¸ë˜ ë¶€ë¶„:
      * ê¸°ì¡´ ë°©ì‹ëŒ€ë¡œ sqlalchemyë¡œ ì—”ì§„ì„ ìƒì„±í•˜ê³  `connect()` í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, `raw_connection()`ì„ í†µí•´ì„œ ì§ì ‘ DBMS connectionê³¼ ì—°ê²°í•´ì•¼í•œë‹¤.
      * syntax: `executemany(query, params)`
      ```
      import json
      UPDATE_SQL = UPDATE asset SET json_column=%s WHERE id=%s
      _dict = {"status": "success", "targets": ["status":"success"]}
      params = [[json.dumps(_dict), "1"]]
      # conn <- connection created through sqlalchemy engine ...
      conn.executemany(UPDATE_SQL, params)
      conn.commit()
      ```

# ğŸ™‹â€â™€ï¸ ê³µë¶€í•  ë‚´ìš©(TO-DO)
* SQLAlchemy: engine, connection, and session ì°¨ì´